<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lexifever - Test de langue</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                        secondary: {
                            50: '#fff7ed',
                            100: '#ffedd5',
                            200: '#fed7aa',
                            300: '#fdba74',
                            400: '#fb923c',
                            500: '#f97316',
                            600: '#ea580c',
                            700: '#c2410c',
                            800: '#9a3412',
                            900: '#7c2d12',
                        },
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.6s ease-out',
                        'slide-up': 'slideUp 0.6s ease-out',
                        'slide-in-left': 'slideInLeft 0.6s ease-out',
                        'slide-in-right': 'slideInRight 0.6s ease-out',
                        'bounce-gentle': 'bounceGentle 2s ease-in-out infinite',
                        'pulse-glow': 'pulseGlow 2s ease-in-out infinite',
                        'float': 'float 3s ease-in-out infinite',
                    },
                    backdropBlur: {
                        xs: '2px',
                    }
                },
            },
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }
            .text-shadow-lg {
                text-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
            }
            .transition-all {
                transition: all 0.3s ease;
            }
            .glass-effect {
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.2);
            }
            .gradient-border {
                background: linear-gradient(white, white) padding-box,
                           linear-gradient(45deg, #0ea5e9, #f97316) border-box;
                border: 2px solid transparent;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes bounceGentle {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(14, 165, 233, 0.3); }
            50% { box-shadow: 0 0 30px rgba(14, 165, 233, 0.6); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .scroll-smooth {
            scroll-behavior: smooth;
        }

        /* Improved hover effects */
        .hover-lift {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .hover-lift:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        ::-webkit-scrollbar-thumb {
            background: #0ea5e9;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #0284c7;
        }

        /* Quiz specific styles */
        .option-button {
            transition: all 0.3s ease;
        }

        .option-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(14, 165, 233, 0.15);
        }

        .option-button.selected {
            background-color: #f0f9ff;
            border-color: #0ea5e9;
            transform: translateY(-2px);
        }

        .option-button.correct {
            background-color: #dcfce7;
            border-color: #16a34a;
        }

        .option-button.incorrect {
            background-color: #fef2f2;
            border-color: #dc2626;
        }

        .progress-ring {
            transform: rotate(-90deg);
        }

        .progress-ring-circle {
            transition: stroke-dasharray 0.3s ease;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="font-sans text-gray-800 bg-gray-50 min-h-screen scroll-smooth">
    <!-- Navigation -->
    <nav class="bg-white/80 backdrop-blur-md shadow-sm fixed w-full z-50 transition-all duration-300" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center animate-slide-in-left">
                        <a href="index.html" class="text-primary-600 text-2xl font-bold bg-gradient-to-r from-primary-600 to-secondary-500 bg-clip-text text-transparent">
                            Lexifever
                        </a>
                    </div>
                </div>
                <div class="hidden sm:ml-6 sm:flex sm:items-center animate-slide-in-right">
                    <a href="history.html" class="text-gray-500 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-all duration-300 flex items-center">
                        <i class="fas fa-history mr-1"></i>Historique
                    </a>
                    <a href="index.html" class="ml-4 bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 transform hover:scale-105">
                        home
                    </a>
                </div>
                <div class="-mr-2 flex items-center sm:hidden">
                    <button id="mobile-menu-button" type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 transition-all duration-300" aria-expanded="false">
                        <span class="sr-only">Ouvrir le menu principal</span>
                        <i class="fas fa-bars transition-transform duration-300" id="menu-icon"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile menu -->
        <div id="mobile-menu" class="sm:hidden hidden bg-white/95 backdrop-blur-md border-t border-gray-200">
            <div class="pt-2 pb-3 space-y-1">
                <a href="history.html" class="block pl-3 pr-4 py-2 text-base font-medium text-gray-500 hover:text-primary-600 hover:bg-gray-50 transition-all duration-300">
                    <i class="fas fa-history mr-2"></i>Historique
                </a>
                <a href="index.html" class="block pl-3 pr-4 py-2 text-base font-medium text-gray-500 hover:text-primary-600 hover:bg-gray-50 transition-all duration-300">
                    home
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-28 pb-12">
        <!-- Breadcrumb -->
        <nav class="flex mb-8 animate-slide-up" aria-label="Breadcrumb">
            <ol class="inline-flex items-center space-x-1 md:space-x-3">
                <li class="inline-flex items-center">
                    <a href="index.html" class="inline-flex items-center text-sm font-medium text-gray-500 hover:text-primary-600 transition-colors duration-300">
                        <i class="fas fa-home mr-2"></i>
                        Accueil
                    </a>
                </li>
                <li>
                    <div class="flex items-center">
                        <i class="fas fa-chevron-right text-gray-400 mx-2 text-xs"></i>
                        <span class="text-sm font-medium text-primary-600">Test de langue</span>
                    </div>
                </li>
            </ol>
        </nav>

        <div class="text-center mb-12 animate-slide-up">
            <h1 class="text-3xl font-extrabold text-gray-900 sm:text-4xl lg:text-5xl">
                <span class="bg-gradient-to-r from-primary-600 to-secondary-500 bg-clip-text text-transparent">Test de langue</span>
            </h1>
            <p class="mt-4 max-w-2xl mx-auto text-xl text-gray-600">
                √âvaluez vos connaissances en vocabulaire anglais du domaine <strong id="domain-name">Technologie</strong>
            </p>
        </div>

        <!-- Background decorative elements -->
        <div class="absolute inset-0 overflow-hidden -z-10">
            <div class="absolute top-40 -right-40 w-80 h-80 bg-primary-200 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-float"></div>
            <div class="absolute bottom-40 -left-40 w-80 h-80 bg-secondary-200 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-float" style="animation-delay: 1s;"></div>
        </div>

        <!-- Quiz Container -->
        <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 max-w-4xl mx-auto hover-lift animate-slide-up" style="animation-delay: 0.2s;">
            <div class="p-6 sm:p-8">
                <!-- Progress Section -->
                <div id="progress-section" class="mb-8">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-4">
                            <div class="relative">
                                <svg class="w-16 h-16 transform -rotate-90" viewBox="0 0 36 36">
                                    <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                          fill="none" stroke="#e5e7eb" stroke-width="2"/>
                                    <path id="progress-ring" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                          fill="none" stroke="#0ea5e9" stroke-width="2" stroke-dasharray="0, 100"/>
                                </svg>
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span id="progress-percentage" class="text-lg font-bold text-primary-600">0%</span>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900">Progression</h3>
                                <p class="text-sm text-gray-600">Question <span id="current-question">1</span> sur <span id="total-questions">10</span></p>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold text-primary-600" id="score-counter">0/0</div>
                            <p class="text-sm text-gray-600">Score actuel</p>
                        </div>
                    </div>
                </div>

                <!-- Question Section -->
                <div id="question-section">
                    <div class="mb-8">
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <div class="w-12 h-12 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-question text-white text-lg"></i>
                                </div>
                            </div>
                            <div class="flex-1">
                                <h2 class="text-xl font-semibold text-gray-900 mb-2" id="question-text">Chargement de la question...</h2>
                                <div class="flex items-center space-x-2 text-sm text-gray-500">
                                    <i class="fas fa-clock"></i>
                                    <span>Temps restant: <span id="timer">30</span>s</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Options -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8" id="options-container">
                        <!-- Options will be loaded here -->
                    </div>

                    <!-- Navigation -->
                    <div class="flex justify-between items-center">
                        <button id="previous-btn" class="inline-flex items-center px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300">
                            <i class="fas fa-arrow-left mr-2"></i>Pr√©c√©dent
                        </button>

                        <div class="flex items-center space-x-4">
                            <button id="hint-btn" class="inline-flex items-center px-4 py-2 text-primary-600 hover:text-primary-700 border border-primary-200 hover:border-primary-300 rounded-lg transition-all duration-300">
                                <i class="fas fa-lightbulb mr-2"></i>Indice
                            </button>
                            <button id="next-btn" class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white rounded-lg transition-all duration-300 transform hover:scale-105">
                                Suivant<i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Results Section -->
                <div id="results-section" class="hidden text-center">
                    <div class="mb-8">
                        <div class="relative mb-6">
                            <div class="text-8xl mb-4" id="score-icon">üéâ</div>
                            <div class="absolute -top-2 -right-2 bg-primary-500 text-white rounded-full w-12 h-12 flex items-center justify-center text-lg font-bold" id="score-badge">A</div>
                        </div>

                        <h2 class="text-3xl font-bold text-gray-900 mb-4" id="results-title">Excellent travail !</h2>
                        <p class="text-xl text-gray-600 mb-8" id="results-description">Vous ma√Ætrisez parfaitement ce vocabulaire.</p>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <div class="bg-gradient-to-br from-primary-50 to-primary-100 p-6 rounded-xl">
                                <div class="text-3xl font-bold text-primary-600" id="final-score">8/10</div>
                                <p class="text-gray-600">Score final</p>
                            </div>
                            <div class="bg-gradient-to-br from-secondary-50 to-secondary-100 p-6 rounded-xl">
                                <div class="text-3xl font-bold text-secondary-600" id="accuracy">80%</div>
                                <p class="text-gray-600">Pr√©cision</p>
                            </div>
                            <div class="bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-xl">
                                <div class="text-3xl font-bold text-green-600" id="time-spent">5:30</div>
                                <p class="text-gray-600">Temps pass√©</p>
                            </div>
                        </div>

                        <!-- Detailed Results -->
                        <div class="bg-gray-50 rounded-xl p-6 mb-8 text-left">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">D√©tail des r√©ponses</h3>
                            <div id="answers-review" class="space-y-3">
                                <!-- Answers will be shown here -->
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button id="retry-btn" class="inline-flex items-center justify-center px-8 py-4 bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white rounded-lg text-lg font-medium transition-all duration-300 transform hover:scale-105">
                            <i class="fas fa-redo mr-2"></i>Refaire le test
                        </button>
                        <a href="select-domain.html" class="inline-flex items-center justify-center px-8 py-4 border-2 border-primary-600 text-primary-600 hover:bg-primary-50 rounded-lg text-lg font-medium transition-all duration-300 transform hover:scale-105">
                            <i class="fas fa-plus mr-2"></i>Nouveau texte
                        </a>
                        <a href="history.html" class="inline-flex items-center justify-center px-8 py-4 border-2 border-gray-300 text-gray-700 hover:bg-gray-50 rounded-lg text-lg font-medium transition-all duration-300 transform hover:scale-105">
                            <i class="fas fa-history mr-2"></i>Voir l'historique
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Learning Tips -->
        <div class="mt-12 animate-slide-up" style="animation-delay: 0.6s;">
            <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                <i class="fas fa-graduation-cap text-secondary-500 mr-3"></i>
                Conseils pour am√©liorer votre score
            </h2>
            <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 hover-lift">
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <div class="flex items-center justify-center h-12 w-12 rounded-md bg-primary-100 text-primary-600">
                                    <i class="fas fa-book-open"></i>
                                </div>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-medium text-gray-900">Pratique r√©guli√®re</h3>
                                <p class="mt-2 text-base text-gray-500">
                                    G√©n√©rez de nouveaux textes r√©guli√®rement pour d√©couvrir du vocabulaire vari√©.
                                </p>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <div class="flex items-center justify-center h-12 w-12 rounded-md bg-primary-100 text-primary-600">
                                    <i class="fas fa-volume-up"></i>
                                </div>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-medium text-gray-900">√âcoute active</h3>
                                <p class="mt-2 text-base text-gray-500">
                                    Utilisez la fonction de lecture audio pour am√©liorer votre compr√©hension orale.
                                </p>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <div class="flex items-center justify-center h-12 w-12 rounded-md bg-primary-100 text-primary-600">
                                    <i class="fas fa-sticky-note"></i>
                                </div>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-medium text-gray-900">Prise de notes</h3>
                                <p class="mt-2 text-base text-gray-500">
                                    Notez les mots difficiles et r√©visez-les r√©guli√®rement.
                                </p>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <div class="flex items-center justify-center h-12 w-12 rounded-md bg-primary-100 text-primary-600">
                                    <i class="fas fa-brain"></i>
                                </div>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-medium text-gray-900">Tests fr√©quents</h3>
                                <p class="mt-2 text-base text-gray-500">
                                    Passez des tests r√©guli√®rement pour suivre vos progr√®s.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white relative overflow-hidden">
        <!-- Background pattern -->
        <div class="absolute inset-0 opacity-5">
            <div class="absolute inset-0" style="background-image: linear-gradient(45deg, #0ea5e9 25%, transparent 25%), linear-gradient(-45deg, #0ea5e9 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #0ea5e9 75%), linear-gradient(-45deg, transparent 75%, #0ea5e9 75%); background-size: 20px 20px; background-position: 0 0, 0 10px, 10px -10px, -10px 0px;"></div>
        </div>

        <div class="max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:px-8 relative">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="md:col-span-1 animate-slide-up">
                    <div class="flex items-center mb-4">
                        <span class="text-3xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent">Lexifever</span>
                    </div>
                    <p class="text-gray-400 leading-relaxed mb-6">
                        Enrichissez votre vocabulaire anglais avec des textes personnalis√©s et des traductions instantan√©es.
                    </p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition-all duration-300 transform hover:scale-110">
                            <i class="fab fa-facebook-f text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-all duration-300 transform hover:scale-110">
                            <i class="fab fa-twitter text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-all duration-300 transform hover:scale-110">
                            <i class="fab fa-instagram text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-all duration-300 transform hover:scale-110">
                            <i class="fab fa-linkedin-in text-xl"></i>
                        </a>
                    </div>
                </div>
                <div class="animate-slide-up" style="animation-delay: 0.1s;">
                    <h3 class="text-sm font-semibold text-gray-300 uppercase tracking-wider mb-4">Produit</h3>
                    <ul class="space-y-3">
                        <li>
                            <a href="index.html#features" class="text-base text-gray-400 hover:text-white transition-colors duration-300">
                                Fonctionnalit√©s
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-base text-gray-400 hover:text-white transition-colors duration-300">
                                Tarifs
                            </a>
                        </li>
                        <li>
                            <a href="index.html#faq" class="text-base text-gray-400 hover:text-white transition-colors duration-300">
                                FAQ
                            </a>
                        </li>
                        <li>
                            <a href="index.html#testimonials" class="text-base text-gray-400 hover:text-white transition-colors duration-300">
                                T√©moignages
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="animate-slide-up" style="animation-delay: 0.2s;">
                    <h3 class="text-sm font-semibold text-gray-300 uppercase tracking-wider mb-4">Support</h3>
                    <ul class="space-y-3">
                        <li>
                            <a href="#" class="text-base text-gray-400 hover:text-white transition-colors duration-300">
                                Centre d'aide
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-base text-gray-400 hover:text-white transition-colors duration-300">
                                Contact
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-base text-gray-400 hover:text-white transition-colors duration-300">
                                Tutoriels
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-base text-gray-400 hover:text-white transition-colors duration-300">
                                Communaut√©
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="animate-slide-up" style="animation-delay: 0.3s;">
                    <h3 class="text-sm font-semibold text-gray-300 uppercase tracking-wider mb-4">L√©gal</h3>
                    <ul class="space-y-3">
                        <li>
                            <a href="#" class="text-base text-gray-400 hover:text-white transition-colors duration-300">
                                Confidentialit√©
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-base text-gray-400 hover:text-white transition-colors duration-300">
                                Conditions d'utilisation
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-base text-gray-400 hover:text-white transition-colors duration-300">
                                Cookies
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="mt-12 border-t border-gray-800 pt-8 md:flex md:items-center md:justify-between">
                <div class="flex space-x-6 md:order-2">
                    <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
                        Conditions
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
                        Confidentialit√©
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
                        Cookies
                    </a>
                </div>
                <p class="mt-8 text-base text-gray-400 md:mt-0 md:order-1">
                    &copy; 2023 Lexifever. Tous droits r√©serv√©s.
                </p>
            </div>
        </div>
    </footer>

    <script src="js/quiz-questions.js"></script>
    <script>
        class LanguageTest {
            constructor() {
                // R√©cup√©rer le domaine depuis l'URL ou utiliser un domaine par d√©faut
                const urlParams = new URLSearchParams(window.location.search);
                const domainFromUrl = urlParams.get('domain');

                // Essayer de r√©cup√©rer le domaine depuis le sessionStorage (si on vient de result.html)
                const sessionDomain = sessionStorage.getItem('selectedDomain');

                // Priorit√© : URL > sessionStorage > d√©faut
                this.selectedDomain = domainFromUrl || sessionDomain || 'Technologie';

                // Charger les questions pour ce domaine
                this.questions = getQuestionsForDomain(this.selectedDomain);

                // Si le domaine n'a pas de questions, utiliser Technologie par d√©faut
                if (!hasQuestionsForDomain(this.selectedDomain)) {
                    console.warn(`Aucune question trouv√©e pour le domaine "${this.selectedDomain}", utilisation de Technologie par d√©faut`);
                    this.selectedDomain = 'Technologie';
                    this.questions = getQuestionsForDomain(this.selectedDomain);
                }

                console.log(`Test charg√© pour le domaine: ${this.selectedDomain} (${this.questions.length} questions)`);

                this.currentQuestionIndex = 0;
                this.score = 0;
                this.userAnswers = [];
                this.questionStartTime = null;
                this.totalTime = 0;
                this.hintsUsed = 0;
                this.timer = null;
                this.timePerQuestion = 30; // seconds
                this.init();
            }

            init() {
                this.updateDomainDisplay();
                this.setupEventListeners();
                this.showQuestion(0);
                this.updateProgressRing(0);
                this.updateScoreCounter();
            }

            updateDomainDisplay() {
                const domainElement = document.getElementById('domain-name');
                if (domainElement) {
                    domainElement.textContent = this.selectedDomain;
                }
            }

            setupEventListeners() {
                document.getElementById('next-btn').addEventListener('click', () => this.nextQuestion());
                document.getElementById('previous-btn').addEventListener('click', () => this.previousQuestion());
                document.getElementById('retry-btn').addEventListener('click', () => this.restartTest());
                document.getElementById('hint-btn').addEventListener('click', () => this.showHint());
            }

            showQuestion(index) {
                this.currentQuestionIndex = index;
                const question = this.questions[index];

                // Start timer
                this.startTimer();

                document.getElementById('question-text').textContent = question.question;
                document.getElementById('current-question').textContent = index + 1;
                document.getElementById('total-questions').textContent = this.questions.length;

                // Update progress
                const progress = ((index + 1) / this.questions.length) * 100;
                this.updateProgressRing(progress);

                const optionsContainer = document.getElementById('options-container');
                optionsContainer.innerHTML = '';

                question.options.forEach((option, optionIndex) => {
                    const button = document.createElement('button');
                    button.className = 'p-4 border border-gray-200 rounded-lg text-left hover:border-primary-300 transition-all option-button';
                    button.innerHTML = `
                        <div class="flex items-center">
                            <span class="flex-1">${option}</span>
                            <span class="option-indicator w-4 h-4 rounded-full border-2 border-gray-300 ml-3"></span>
                        </div>
                    `;
                    button.dataset.optionIndex = optionIndex;

                    if (this.userAnswers[index] === optionIndex) {
                        button.classList.add('selected');
                        button.querySelector('.option-indicator').classList.add('bg-primary-500', 'border-primary-500');
                    }

                    button.addEventListener('click', () => this.selectOption(optionIndex));
                    optionsContainer.appendChild(button);
                });

                this.updateNavigationButtons();
            }

            selectOption(optionIndex) {
                // Clear previous selection
                document.querySelectorAll('.option-button').forEach(button => {
                    button.classList.remove('selected');
                    button.querySelector('.option-indicator').classList.remove('bg-primary-500', 'border-primary-500');
                });

                // Set new selection
                this.userAnswers[this.currentQuestionIndex] = optionIndex;
                const selectedButton = document.querySelector(`[data-option-index="${optionIndex}"]`);
                selectedButton.classList.add('selected');
                selectedButton.querySelector('.option-indicator').classList.add('bg-primary-500', 'border-primary-500');

                this.updateScoreCounter();
            }

            startTimer() {
                clearInterval(this.timer);
                let timeLeft = this.timePerQuestion;
                document.getElementById('timer').textContent = timeLeft;

                this.timer = setInterval(() => {
                    timeLeft--;
                    document.getElementById('timer').textContent = timeLeft;

                    if (timeLeft <= 10) {
                        document.getElementById('timer').classList.add('text-red-500', 'font-bold');
                    }

                    if (timeLeft <= 0) {
                        clearInterval(this.timer);
                        this.nextQuestion();
                    }
                }, 1000);
            }

            showHint() {
                const question = this.questions[this.currentQuestionIndex];
                this.hintsUsed++;

                // Show hint in a modal or tooltip
                const hintBtn = document.getElementById('hint-btn');
                const originalText = hintBtn.innerHTML;
                hintBtn.innerHTML = `<i class="fas fa-lightbulb mr-2"></i>${question.hint}`;
                hintBtn.disabled = true;

                setTimeout(() => {
                    hintBtn.innerHTML = originalText;
                    hintBtn.disabled = false;
                }, 3000);
            }

            nextQuestion() {
                clearInterval(this.timer);

                if (this.currentQuestionIndex < this.questions.length - 1) {
                    this.showQuestion(this.currentQuestionIndex + 1);
                } else {
                    this.showResults();
                }
            }

            previousQuestion() {
                clearInterval(this.timer);
                if (this.currentQuestionIndex > 0) {
                    this.showQuestion(this.currentQuestionIndex - 1);
                }
            }

            updateNavigationButtons() {
                const previousBtn = document.getElementById('previous-btn');
                const nextBtn = document.getElementById('next-btn');

                previousBtn.disabled = this.currentQuestionIndex === 0;

                if (this.currentQuestionIndex === this.questions.length - 1) {
                    nextBtn.innerHTML = '<i class="fas fa-check mr-2"></i>Voir les r√©sultats';
                } else {
                    nextBtn.innerHTML = 'Suivant<i class="fas fa-arrow-right ml-2"></i>';
                }
            }

            updateProgressRing(percentage) {
                const progressRing = document.getElementById('progress-ring');
                const circumference = 2 * Math.PI * 15.9155; // radius = 15.9155
                const offset = circumference - (percentage / 100) * circumference;
                progressRing.style.strokeDasharray = `${circumference - offset}, ${circumference}`;

                document.getElementById('progress-percentage').textContent = Math.round(percentage) + '%';
            }

            updateScoreCounter() {
                const correctAnswers = this.userAnswers.filter((answer, index) =>
                    answer === this.questions[index].correctAnswer
                ).length;
                document.getElementById('score-counter').textContent = `${correctAnswers}/${this.questions.length}`;
            }

            showResults() {
                clearInterval(this.timer);
                this.calculateScore();

                document.getElementById('progress-section').classList.add('hidden');
                document.getElementById('question-section').classList.add('hidden');
                document.getElementById('results-section').classList.remove('hidden');

                this.displayResults();
            }

            calculateScore() {
                this.score = 0;
                this.questions.forEach((question, index) => {
                    if (this.userAnswers[index] === question.correctAnswer) {
                        this.score++;
                    }
                });
            }

            displayResults() {
                const percentage = Math.round((this.score / this.questions.length) * 100);
                const accuracy = percentage + '%';

                // Update score display
                document.getElementById('final-score').textContent = `${this.score}/${this.questions.length}`;
                document.getElementById('accuracy').textContent = accuracy;

                // Format time
                const minutes = Math.floor(this.totalTime / 60);
                const seconds = this.totalTime % 60;
                document.getElementById('time-spent').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;

                // Set icon and title based on performance
                let title, description, icon, badge;
                if (percentage >= 90) {
                    title = "Excellent travail !";
                    description = "Vous ma√Ætrisez parfaitement ce vocabulaire technique.";
                    icon = "üèÜ";
                    badge = "A+";
                } else if (percentage >= 80) {
                    title = "Tr√®s bon travail !";
                    description = "Vous avez une excellente compr√©hension du vocabulaire.";
                    icon = "üéâ";
                    badge = "A";
                } else if (percentage >= 70) {
                    title = "Bon travail !";
                    description = "Vous progressez bien, continuez √† pratiquer.";
                    icon = "üëè";
                    badge = "B";
                } else if (percentage >= 60) {
                    title = "Travail correct";
                    description = "Vous avez des bases solides, mais pouvez vous am√©liorer.";
                    icon = "üëç";
                    badge = "C";
                } else {
                    title = "Continuez √† pratiquer";
                    description = "Relisez vos textes et concentrez-vous sur les termes difficiles.";
                    icon = "üìö";
                    badge = "D";
                }

                document.getElementById('results-title').textContent = title;
                document.getElementById('results-description').textContent = description;
                document.getElementById('score-icon').textContent = icon;
                document.getElementById('score-badge').textContent = badge;

                // Show detailed answers review
                this.showAnswersReview();
            }

            showAnswersReview() {
                const reviewContainer = document.getElementById('answers-review');
                reviewContainer.innerHTML = '';

                this.questions.forEach((question, index) => {
                    const userAnswer = this.userAnswers[index];
                    const isCorrect = userAnswer === question.correctAnswer;

                    const answerDiv = document.createElement('div');
                    answerDiv.className = `p-4 rounded-lg border ${isCorrect ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}`;

                    answerDiv.innerHTML = `
                        <div class="flex items-start space-x-3">
                            <div class="flex-shrink-0">
                                <i class="fas ${isCorrect ? 'fa-check text-green-500' : 'fa-times text-red-500'} text-lg mt-1"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium text-gray-900">${question.question}</p>
                                <p class="text-sm text-gray-600 mt-1">
                                    <span class="font-medium">Votre r√©ponse:</span> ${question.options[userAnswer] || 'Non r√©pondu'}
                                </p>
                                ${!isCorrect ? `<p class="text-sm text-green-600 mt-1"><span class="font-medium">R√©ponse correcte:</span> ${question.options[question.correctAnswer]}</p>` : ''}
                                <p class="text-sm text-gray-500 mt-2 italic">${question.explanation}</p>
                            </div>
                        </div>
                    `;

                    reviewContainer.appendChild(answerDiv);
                });
            }

            restartTest() {
                this.currentQuestionIndex = 0;
                this.score = 0;
                this.userAnswers = [];
                this.totalTime = 0;
                this.hintsUsed = 0;

                document.getElementById('results-section').classList.add('hidden');
                document.getElementById('progress-section').classList.remove('hidden');
                document.getElementById('question-section').classList.remove('hidden');

                this.showQuestion(0);
                this.updateProgressRing(0);
                this.updateScoreCounter();
            }
        }

        // Mobile menu functionality
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize the test
            new LanguageTest();

            // Mobile menu toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const menuIcon = document.getElementById('menu-icon');

            if (mobileMenuButton) {
                mobileMenuButton.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');

                    if (mobileMenu.classList.contains('hidden')) {
                        menuIcon.classList.remove('fa-times');
                        menuIcon.classList.add('fa-bars');
                        menuIcon.style.transform = 'rotate(0deg)';
                    } else {
                        menuIcon.classList.remove('fa-bars');
                        menuIcon.classList.add('fa-times');
                        menuIcon.style.transform = 'rotate(180deg)';
                    }
                });
            }

            // Navbar background change on scroll
            const navbar = document.getElementById('navbar');

            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    navbar.classList.add('bg-white/95');
                    navbar.classList.remove('bg-white/80');
                } else {
                    navbar.classList.add('bg-white/80');
                    navbar.classList.remove('bg-white/95');
                }
            });

            // Intersection Observer for animations
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);

            // Observe all animated elements
            document.querySelectorAll('.animate-slide-up, .animate-slide-in-left, .animate-slide-in-right, .animate-fade-in').forEach(el => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(30px)';
                observer.observe(el);
            });

            // Add loading animation
            window.addEventListener('load', () => {
                document.body.classList.add('loaded');
            });
        });
    </script>
</body>
</html>