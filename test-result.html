<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Result Page</title>
    <script>
        // D√©finir l'API_BASE_URL pour cette page de test
        window.API_BASE_URL = window.location.origin + '/lexifever/api';
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-8">
    <h1 class="text-2xl font-bold mb-4">Test de la page Result</h1>

    <div class="mb-4">
        <button onclick="setTestParams()" class="bg-blue-500 text-white px-4 py-2 rounded mr-2">D√©finir param√®tres de test</button>
        <button onclick="goToResult()" class="bg-green-500 text-white px-4 py-2 rounded">Aller √† result.html</button>
    </div>

    <div id="status" class="mt-4 p-4 bg-gray-100 rounded">
        Cliquez sur "D√©finir param√®tres de test" puis sur "Aller √† result.html"
    </div>

    <script>
        // Simuler SessionManager
        const SessionManager = {
            saveParams(params) {
                sessionStorage.setItem('lexifever_params', JSON.stringify(params));
                console.log('üíæ Param√®tres sauvegard√©s:', params);
            },
            getParams() {
                const params = sessionStorage.getItem('lexifever_params');
                return params ? JSON.parse(params) : {};
            }
        };

        function setTestParams() {
            const params = {
                domain: 'Technologie',
                topic: 'Intelligence Artificielle',
                level: 'intermediate',
                tone: 'informative',
                length: 'medium',
                session_id: 'test_' + Date.now()
            };

            SessionManager.saveParams(params);
            document.getElementById('status').innerHTML = `
                ‚úÖ Param√®tres d√©finis avec succ√®s !<br>
                <strong>Domaine:</strong> ${params.domain}<br>
                <strong>Sujet:</strong> ${params.topic}<br>
                <strong>Niveau:</strong> ${params.level}<br>
                <strong>Tonalit√©:</strong> ${params.tone}<br>
                <strong>Longueur:</strong> ${params.length}<br>
                <br>
                <span style="color: green;">Cliquez maintenant sur "Aller √† result.html" pour tester la g√©n√©ration !</span>
            `;
        }

        function goToResult() {
            const params = SessionManager.getParams();
            if (!params.domain) {
                alert('Veuillez d\'abord d√©finir les param√®tres de test !');
                return;
            }
            console.log('üöÄ Redirection vers result.html avec param√®tres:', params);
            window.location.href = 'result.html';
        }

        // V√©rifier les param√®tres au chargement
        window.addEventListener('load', function() {
            const params = SessionManager.getParams();
            if (params.domain) {
                document.getElementById('status').innerHTML = `
                    üìã Param√®tres d√©j√† d√©finis:<br>
                    <strong>${params.domain} ‚Üí ${params.topic}</strong><br>
                    <span style="color: blue;">Cliquez sur "Aller √† result.html" pour tester !</span>
                `;
            }
        });
    </script>
</body>
</html>
